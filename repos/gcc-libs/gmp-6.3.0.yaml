package:
    name: gmp
    version: 6.3.0
    rel: 1
    archive: false
    delete: true

sources:
    - url: https://mirror.csclub.uwaterloo.ca/gnu/gmp/gmp-6.3.0.tar.xz
      md5: 956dc04e864001a9c22429f761f2c283
      sha256: a3c2b80201b89e68616f4ad30bc66aee4927c3ce50e33929ca819d5c43538898

prepare: |
    sed -i '/long long t1;/,+1s/()/(...)/' configure &&
    ./configure --prefix=/usr --enable-cxx --disable-static --docdir=/usr/share/doc/gmp-6.3.0

build: |
    make && make html &&
    make check 2>&1 | tee gmp-check-log

install: |
    make install && make install-html &&
    awk '/# PASS:/{total+=$3} ; END{print total}' gmp-check-log
