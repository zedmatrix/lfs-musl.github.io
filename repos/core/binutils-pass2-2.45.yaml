package:
    name: binutils-pass2
    version: 2.45
    rel: 1
    archive: false
    delete: true

sources:
    - url: https://sourceware.org/pub/binutils/releases/binutils-2.45.tar.xz
      md5: dee5b4267e0305a99a3c9d6131f45759
      sha256: c50c0e7f9cb188980e2cc97e4537626b1672441815587f1eab69d2a1bfbef5d2

prepare: |
    sed '6031s/$add_dir//' -i ltmain.sh &&
    mkdir -v Ybuild && cd Ybuild && ../configure --prefix=/usr --build=$(../config.guess) \
    --host=$LFS_TGT --disable-nls --enable-shared --enable-gprofng=no --disable-werror --enable-64-bit-bfd \
    --enable-new-dtags --enable-default-hash-style=gnu

build: |
    cd Ybuild && make

install: |
    cd Ybuild && make DESTDIR=$LFS install &&
    rm -v $LFS/usr/lib/lib{bfd,ctf,ctf-nobfd,opcodes,sframe}.{a,la}
