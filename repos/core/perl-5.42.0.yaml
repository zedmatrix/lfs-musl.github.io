package:
    name: perl
    version: 5.42.0
    rel: 1
    archive: false
    delete: true

sources:
    - url: https://www.cpan.org/src/5.0/perl-5.42.0.tar.xz
      md5: 7a6950a9f12d01eb96a9d2ed2f4e0072
      sha256: 73cf6cc1ea2b2b1c110a18c14bbbc73a362073003893ffcedc26d22ebdbdd0c3

prepare: |
    export BUILD_ZLIB=False && export BUILD_BZIP2=0 && sh Configure -des -D prefix=/usr -D vendorprefix=/usr \
    -D privlib=/usr/lib/perl5/5.42/core_perl -D archlib=/usr/lib/perl5/5.42/core_perl \
    -D sitelib=/usr/lib/perl5/5.42/site_perl -D sitearch=/usr/lib/perl5/5.42/site_perl \
    -D vendorlib=/usr/lib/perl5/5.42/vendor_perl -D vendorarch=/usr/lib/perl5/5.42/vendor_perl \
    -D man1dir=/usr/share/man/man1 -D man3dir=/usr/share/man/man3 -D pager="/usr/bin/less -isR" \
    -D useshrplib -D usethreads -A ccflags='-D_GNU_SOURCE=1'

build: |
    make

check: |
    TEST_JOBS=$(nproc) make test_harness || true

install: |
    make install
