package:
    name: python
    version: 3.13.7
    rel: 1
    archive: false
    delete: true

sources:
    - url: https://www.python.org/ftp/python/3.13.7/Python-3.13.7.tar.xz
      md5: 256cdb3bbf45cdce7499e52ba6c36ea3
      sha256: 5462f9099dfd30e238def83c71d91897d8caa5ff6ebc7a50f14d4802cdaaa79a
    - url: https://www.python.org/ftp/python/doc/3.13.7/python-3.13.7-docs-html.tar.bz2
      md5: b84c0d81b2758398bb7f5b7411d3d908
      sha256: e9b69b505b9ae08da6b9192f6ce8fff171ba33f2b21b4f1c213369eac2f92cef

prepare: |
    cp ${YSRC}/pip.conf /etc/pip.conf &&
    ./configure --prefix=/usr --enable-shared --with-system-expat \
    --enable-optimizations --without-static-libpython --disable-test-modules

build: |
    make PROFILE_TASK='-m test --pgo -i test_fma_zero_result -i test_locale_caching -i test_locale_compiled'

install: |
    make install &&
    install -v -dm755 /usr/share/doc/python-3.13.7/html

final: |
    tar -xvf ${YSRC}/python-3.13.7-docs-html.tar.bz2 \
    --strip-components=1 --no-same-owner --no-same-permissions -C /usr/share/doc/python-3.13.7/html

required:
    - sqlite
