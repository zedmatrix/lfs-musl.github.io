package:
    name: expect
    version: 5.45.4
    rel: 1
    archive: false
    delete: true

sources:
    - url: https://prdownloads.sourceforge.net/expect/expect5.45.4.tar.gz
      md5: 00fce8de158422f5ccd2666512329bd2
      sha256: 49a7da83b0bdd9f46d04a04deec19c7767bb9a323e40c4781f89caf760b92c34

patches:
    - url: https://www.linuxfromscratch.org/patches/downloads/expect/expect-5.45.4-gcc15-1.patch
      md5: 0ca4d6bb8d572fbcdb13cb36cd34833e

prepare: |
    python3 -c 'from pty import spawn; spawn(["echo", "ok"])' &&
    ./configure --prefix=/usr --with-tcl=/usr/lib --enable-shared \
    --disable-rpath --mandir=/usr/share/man --with-tclinclude=/usr/include

build: |
    make

install: |
    make install &&
    ln -svf expect5.45.4/libexpect5.45.4.so /usr/lib
